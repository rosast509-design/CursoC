<HTML><!-- InstanceBegin template="/Templates/plantilla.dwt" codeOutsideHTMLIsLocked="false" -->
<HEAD>
<!-- InstanceBeginEditable name="doctitle" -->
<TITLE>Curso de C - Arrays (Matrices)</TITLE>
<!-- InstanceEndEditable --> 
<meta name="description" content="Curso de C - Introducción">
<meta name="keywords" content="Programación, Curso de C, C">
<META NAME="GENERATOR" CONTENT="Arachnophilia 3.5">
<META NAME="FORMATTER" CONTENT="Arachnophilia 3.5">
<meta name="author" content="Gorka Urrutia">
<meta name="DC.Creator" content="Gorka Urrutia">
<META name="robots" content="noindex, nofollow">
<style type="text/css">
<!--
    body {
        font-family: Verdana, Arial, sans-serif;
        font-size: 12px;
        background: white;
        color: #333;
        line-height: 1.6;
        margin: 20px;
        max-width: 800px;
        margin-left: auto;
        margin-right: auto;
    }
    
    h1 {
        font-family: Verdana, Arial, sans-serif;
        font-size: 24pt;
        font-weight: bold;
        color: #006600;
        text-align: center;
        margin-bottom: 20px;
    }
    
    h2 {
        font-family: Verdana, Arial, sans-serif;
        font-size: 18pt;
        font-weight: bold;
        color: #006600;
        border-bottom: 2px solid #e0e0e0;
        padding-bottom: 10px;
        margin-top: 30px;
    }
    
    a:link, a:visited {
        font-family: Verdana, Arial, sans-serif;
        font-weight: bold;
        color: #006600;
        text-decoration: none;
    }
    
    a:hover {
        color: #009900;
        text-decoration: underline;
    }
    
    .barranavegaciontop, .barranavegacionabajo {
        background-color: #f9f9f9;
        border: 1px solid #e0e0e0;
        border-radius: 5px;
        padding: 10px;
        margin: 20px 0;
        text-align: center;
    }
    
    .barranav {
        font-family: Verdana, Arial, sans-serif;
        font-weight: bold;
        color: #006600;
        text-decoration: none;
        margin: 0 10px;
    }
    
    .barranav:hover {
        color: #009900;
        text-decoration: underline;
    }
    
    .volver {
        text-align: right;
        margin: 20px 0;
    }
    
    ul {
        background-color: #f9f9f9;
        border: 1px solid #e0e0e0;
        border-radius: 5px;
        padding: 20px 40px;
        margin: 20px 0;
    }
    
    li {
        margin: 10px 0;
    }
    
    .ejemplo {
        background-color: #f0f0f0;
        border-left: 4px solid #006600;
        padding: 15px;
        margin: 15px 0;
        font-family: "Courier New", monospace;
        font-size: 12px;
        overflow-x: auto;
    }
    
    .nota {
        background-color: #fff8e1;
        border-left: 4px solid #ff9800;
        padding: 15px;
        margin: 15px 0;
    }
    
    .resultado {
        background-color: #e8f5e8;
        border-left: 4px solid #4caf50;
        padding: 15px;
        margin: 15px 0;
        font-family: "Courier New", monospace;
        font-size: 12px;
    }
    
    table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
    }
    
    img {
        border: 0;
        display: block;
        margin: 10px auto;
    }
    
    pre {
        margin: 0;
        white-space: pre-wrap;
    }
    
    code {
        color: #006600;
    }
    
    var {
        font-style: italic;
        color: #006600;
    }
    
    .letraC {
        font-weight: bold;
        color: #006600;
    }
    
    .texto {
        background-color: #f9f9f9;
        border: 1px solid #e0e0e0;
        border-radius: 5px;
        padding: 20px;
        margin: 20px 0;
    }
    
    .ejemplo pre {
        margin: 0;
        background: none;
        border: none;
        padding: 0;
    }
    
    b, strong {
        color: #006600;
    }
    
    u {
        color: #006600;
    }
    
    ol.texto {
        background-color: #f9f9f9;
        border: 1px solid #e0e0e0;
        border-radius: 5px;
        padding: 20px 40px;
        margin: 20px 0;
    }
    
    ol.texto li {
        margin: 10px 0;
    }
    
    table[border="1"] {
        width: 100%;
        border: 1px solid #e0e0e0;
        border-collapse: collapse;
        margin: 20px 0;
    }
    
    table[border="1"] td {
        border: 1px solid #e0e0e0;
        padding: 10px;
        text-align: center;
    }
    
    table[border="1"] th {
        border: 1px solid #e0e0e0;
        padding: 10px;
        background-color: #f9f9f9;
        font-weight: bold;
    }
    
    center {
        text-align: center;
    }
    
    font[color="#ff0000"] {
        color: #ff0000;
    }
    
    font[color="#0000ff"] {
        color: #0000ff;
    }
    
    blockquote.texto {
        background-color: #f9f9f9;
        border: 1px solid #e0e0e0;
        border-radius: 5px;
        padding: 20px;
        margin: 20px 0;
        font-style: italic;
    }
    
    em {
        font-style: italic;
    }
-->
</style>
<!-- InstanceBeginEditable name="head" --><!-- InstanceEndEditable -->
</HEAD>
<BODY>
<a name="arriba"></a> 

<table width="100%" border="0">
<tr>
<td align="left"><img src="https://sic.cultura.gob.mx/imagenes_cache/universidad_4269_g_74422.png" alt="Curso de C" border="0" style="width: 300px; height: auto; max-width: 300px;">
</td>
<td align="right"><a href="http://www.elrincondelc.com" target="_top"><img src="logogrande.gif" alt="El Rincón del C - www.elrincondelc.com"  border="0"></a> 
</td>
</tr>
</table>
<!-- InstanceBeginEditable name="Titulo" -->
<h1>Arrays (Matrices)</h1>
<!-- InstanceEndEditable --> 

<p class="barranavegaciontop"><!-- InstanceBeginEditable name="BarraNavegacion" --> 
<a href="cursoc9.html" class="barranav">[Anterior]</a> <a href="cursoc11.html" class="barranav">[Siguiente]</a> 
<a href="index.html" target="_top" class="barranav">[Contenido]</a>
<!-- InstanceEndEditable --></p>

<!-- InstanceBeginEditable name="Cuerpo" -->
<a name="arriba"></a>

<A NAME="contenido"></A>
<H2>
	Contenido del Capítulo:
</H2>
<UL>
<li><A HREF="#intro">Introducción, ¿Qué es un array?</A><BR>
<li><A HREF="#declaracion">Declaración de un Array</A><BR>
<li><A HREF="#dimension">Sobre la dimensión de un array</A><BR>
<li><A HREF="#inicializar">Inicializar un array</A><BR>
<li><A HREF="#recorrer">Recorrer un array</A><BR>
<li><A HREF="#punteros">Punteros a arrays</A><BR>
<li><A HREF="#funciones">Paso de un array a una función</A><BR>
<li><A HREF="#ejercicios">Ejercicios</A><BR>
</UL>


<A NAME="intro"></A>
<H2>
	¿Qué es un array?
</H2>


<p class="nota">Nota: algunas personas conocen a los arrays como <em>arreglos, 
  matrices o vectores.</em> Sin embargo, en este curso, vamos a usar el término 
  array ya que es, según creo, el más extendido en la bibliografía 
  sobre el tema.</p>
<p>La definición sería algo así:</p>

<BLOCKQUOTE class="texto">Un array es un conjunto de variables del mismo tipo que tienen el mismo nombre y se diferencian en el índice.</BLOCKQUOTE>

<p>Pero ¿qué quiere decir esto y para qué lo queremos?. Pues bien, supongamos que somos un metereólogo y queremos guardar en el ordenador la temperatura que ha hecho cada hora del dia. Para darle cierta utilidad al final calcularemos la media de las temperaturas. Con lo que sabemos hasta ahora sería algo así (que nadie se moleste ni en probarlo):</p>


<DIV CLASS="ejemplo"><PRE>#include &lt;stdio.h&gt;

int main()
     {
     /* Declaramos 24 variables, una para cada hora del dia */
     int temp1,  temp2,  temp3,  temp4,  temp5,  temp6,  temp7,  temp8;
     int temp9,  temp10, temp11, temp12, temp13, temp14, temp15, temp16;
     int temp17, temp18, temp19, temp20, temp21, temp22, temp23, temp0;
     int media;

     /* Ahora tenemos que dar el valor de cada una */
     printf( "Temperatura de las 0: " );
     scanf( "%i", &temp0 );
     printf( "Temperatura de las 1: " );
     scanf( "%i", &temp1 );
     printf( "Temperatura de las 2: " );
     scanf( "%i", &temp2 );
     ...
     printf( "Temperatura de las 23: " );
     scanf( "%i", &temp23 );
	
     media = ( temp0 + temp1 + temp2 + temp3 + temp4 + ... + temp23 ) / 24;
     printf( "\nLa temperatura media es %i\n", media );
     }</PRE></DIV>

<p>NOTA: Los puntos suspensivos los he puesto para no tener que escribir todo y que no ocupe tanto, no se pueden usar en un programa.</p>


<p>Para acortar un poco el programa podríamos hacer algo así:</p>

<DIV CLASS="ejemplo"><PRE>#include &lt;stdio.h&gt;

int main()
     {
     /* Declaramos 24 variables, una para cada hora del dia */
     int temp1,  temp2,  temp3,  temp4,  temp5,  temp6,  temp7,  temp8;
     int temp9,  temp10, temp11, temp12, temp13, temp14, temp15, temp16;
     int temp17, temp18, temp19, temp20, temp21, temp22, temp23, temp0;
     int media;

     /* Ahora tenemos que dar el valor de cada una */
     printf( "Introduzca las temperaturas desde las 0 hasta las 23 separadas por un espacion: " );
     scanf( "%i %i %i ... %i", &temp0, &temp1, &temp2, ... &temp23 );
	
     media = ( temp0 + temp1 + temp2 + temp3 + temp4 + ... + temp23 ) / 24;
     printf( "\nLa temperatura media es %i\n", media );
     }</PRE></DIV>




<p>Lo que no deja de ser un peñazo. Y esto con un ejemplo que tiene tan sólo 24 variables, ¡¡imagínate si son más!!</p>


<p>Y precisamente aquí es donde nos vienen de perlas los arrays. Vamos a hacer el programa con un array. Usaremos nuestros conocimientos de bucles for y de scanf.</p>

<DIV CLASS="ejemplo"><PRE>#include &lt;stdio.h&gt;

int main()
     {
     int temp[24]; /* Con esto ya tenemos declaradas las 24 variables */
     float media = 0;
     int hora;

     /* Ahora tenemos que dar el valor de cada una */
     for( hora=0; hora&lt;24; hora++ )
          {
          printf( "Temperatura de las %i: ", hora );
          scanf( "%i", &temp[hora] );
          media += temp[hora];
          }
     media = media / 24;

     printf( "\nLa temperatura media es %f\n", media );
     }</PRE></DIV>


<p>Como ves es un programa más rápido de escribir (y es menos aburrido hacerlo), y más cómodo para el usuario que el anterior.</p>


<p>Como ya hemos comentado cuando declaramos una variable lo que estamos haciendo es reservar una zona de la memoria para ella. Cuando declaramos un array lo que hacemos (en este ejemplo) es reservar espacio en memoria para 24 variables de tipo int. El tamaño del array (24) lo indicamos entre corchetes al definirlo. Esta es la parte de la definición que dice: <I>Un array es un conjunto de variables del mismo tipo que tienen el mismo nombre</I>.</p>


<p>La parte final de la definición dice: <I>y se diferencian en el índice</I>. En ejemplo recorremos la matriz mediante un bucle for y vamos dando valores a los distintos elementos de la matriz. Para indicar a qué elemento nos referimos usamos un número entre corchetes (en este caso la variable hora), este número es lo que se llama <B>Indice</B>. El primer elemento de la matriz en <B><FONT COLOR="#0000ff" SIZE="+2" FACE="Comic Sans MS, Arial">C</FONT></B> tiene el índice 0, El segundo tiene el 1 y así sucesivamente. De modo que si queremos dar un valor al elemento 4 (índice 3) haremos:</p>


<DIV CLASS="ejemplo"><PRE>
	temp[ 3 ] = 20;
</PRE></DIV>

<p>NOTA: No hay que confundirse. En la declaración del array el número entre corchetes es el número de elementos, en cambio cuando ya usamos la matriz el número entre corchetes es el índice.</p>



<p class="volver"><a href="#arriba">[Arriba]</a></p>

<A NAME="declaracion"></A>
<H2>
	Declaración de un Array
</H2>

<p>La forma general de declarar un array es la siguiente:</p>

<DIV CLASS="ejemplo"><PRE>
	<I>tipo_de_dato</I> nombre_del_array[ dimensión ];
</PRE></DIV>

<p>El <I>tipo_de_dato</I> es uno de los tipos de datos conocidos (int, char, float...) o de los definidos por el usuario con typdef. En el ejemplo era int.</p>

<p>El nombre_del_array es el nombre que damos al array, en el ejemplo era temp.</p>

<p>La dimensión es el número de elementos que tiene el array.</p>


<p>Como he indicado antes, al declarar un array reservamos en memoria tantas variables del <I>tipo_de_dato</I> como las indicada en <I>dimensión</I>.</p>

<p class="volver"><a href="#arriba">[Arriba]</a></p>

<A NAME="dimension"></A>
<H2>
	Sobre la dimensión de un Array
</H2>


<p>Hemos visto en el ejemplo que tenemos que indicar en varios sitios el tamaño del array: en la declaración, en el bucle for y al calcular la media. Este es un programa pequeño, en un programa mayor probablemente habrá que escribirlo muchas más veces. Si en un momento dado queremos cambiar la dimensión del array tendremos que cambiar todos. Si nos equivocamos al escribir el tamaño (ponemos 25 en vez de 24) cometeremos un error y puede que no nos demos cuenta. Por eso es mejor usar una constante con nombre, por ejemplo ELEMENTOS.</p>

<DIV CLASS="ejemplo"><PRE>#include &lt;stdio.h&gt;

#define ELEMENTOS	24
int main()
     {
     int temp[<B>ELEMENTOS</B>]; /* Con esto ya tenemos declaradas las 24 variables */
     float media = 0;
     int hora;

     /* Ahora tenemos que dar el valor de cada una */
     for( hora=0; hora&lt;<B>ELEMENTOS</B>; hora++ )
          {
          printf( "Temperatura de las %i: ", hora );
          scanf( "%i", &temp[hora] );
          media += temp[hora];
          }
     media = media / <B>ELEMENTOS</B>;

     printf( "\nLa temperatura media es %f\n", media );
     }
<FONT SIZE="-2" COLOR="#000000">Comprobado con DJGPP</FONT>
</PRE></DIV>

<p>Ahora con sólo cambiar el valor de elementos una vez lo estaremos haciendo en todo el programa.</p>


<p class="volver"><a href="#arriba">[Arriba]</a></p>

<A NAME="inicializar"></A>
<H2>
	Inicializar un array
</H2>


<p>En <B><FONT COLOR="#0000ff" SIZE="+2" FACE="Comic Sans MS, Arial">C</FONT></B> se pueden inicializar los arrays al declararlos igual que hacíamos con las variables. Recordemos que se podía hacer:</p>

<DIV CLASS="ejemplo"><PRE>
	int hojas = 34;
</PRE></DIV>

<p>Pues con arrays se puede hacer:</p>

<DIV CLASS="ejemplo"><PRE>
	int temperaturas[24] = { 15, 18, 20, 23, 22, 24, 22, 25, 26, 25, 24, 22, 
                            21, 20, 18, 17, 16, 17, 15, 14, 14, 14, 13, 12 };
</PRE></DIV>

<p>Ahora el elemento 0 (que será el primero), es decir temperaturas[0] valdrá 15. El elemento 1 (el segundo) valdrá 18 y así con todos. Vamos a ver un ejemplo:</p>


<DIV CLASS="ejemplo"><PRE>
#include &lt;stdio.h&gt;

int main()
     {
     int hora;
     int temperaturas[24] = { 15, 18, 20, 23, 22, 24, 22, 25, 26, 25, 24,
                                  22, 21, 20, 18, 17, 16, 17, 15, 14, 14, 14, 13, 12 };

     for (hora=0 ; hora&lt;24 ; hora++ )
         {
         printf( "La temperatura a las %i era de %i grados.\n", hora, temperaturas[hora] );
         }
     }
<FONT SIZE="-2" COLOR="#000000">Comprobado con DJGPP</FONT>
</PRE></DIV>


<p>Pero a ver quién es el habilidoso que no se equivoca al meter los datos, no es difícil olvidarse alguno. Hemos indicado al compilador que nos reserve memoria para un array de 24 elementos de tipo int. ¿Qué ocurre si metemos menos de los reservados? Pues no pasa nada, sólo que los elementos que falten valdrán cero.</p>

<DIV CLASS="ejemplo"><PRE>
#include &lt;stdio.h&gt;

int main()
     {
     int hora;
     /* Faltan los tres últimos elementos */
     int temperaturas[24] = { 15, 18, 20, 23, 22, 24, 22, 25, 26, 25,
                           24, 22, 21, 20, 18, 17, 16, 17, 15, 14, 14 };

     for (hora=0 ; hora&lt;24 ; hora++ )
         {
         printf( "La temperatura a las %i era de %i grados.\n", hora, temperaturas[hora] );
         }
     }
<FONT SIZE="-2" COLOR="#000000">Comprobado con DJGPP</FONT>
</PRE></DIV>


<p>El resultado será:</p>


<DIV CLASS="ejemplo"><PRE>
La temperatura a las 0 era de 15 grados.
La temperatura a las 1 era de 18 grados.
La temperatura a las 2 era de 20 grados.
La temperatura a las 3 era de 23 grados.
...
La temperatura a las 17 era de 17 grados.
La temperatura a las 18 era de 15 grados.
La temperatura a las 19 era de 14 grados.
La temperatura a las 20 era de 14 grados.
<B>La temperatura a las 21 era de 0 grados.
La temperatura a las 22 era de 0 grados.
La temperatura a las 23 era de 0 grados.</B>
</PRE></DIV>

<p>Vemos que los últimos 3 elementos son nulos, que son aquellos a los que no hemos dado valores. El compilador no nos avisa que hemos metido menos datos de los reservados.</p>


<p>NOTA: Fíjate que para recorrer del elemento 0 al 23 (24 elementos) hacemos: for(hora=0; hora&lt;24; hora++). La condición es que hora sea menos de 24.
También podíamos haber hecho que hora!=24.</p>

<p>Ahora vamos a ver el caso contrario, metemos más datos de los reservados. Vamos a meter 25 en vez de 24. Si hacemos esto dependiendo del compilador obtendremos un error o al menos un warning (aviso). En unos compiladores el programa se creará y en otros no, pero aún así nos avisa del fallo. Debe indicarse que estamos intentando guardar un dato de más, no hemos reservado memoria para él.</p>


<p>Si la matriz debe tener una longitud determinada usamos este método de definir el número de elementos. En nuestro caso era conveniente, porque los dias siempre tienen 24 horas. Es conveniente definir el tamaño de la matriz para que nos avise si metemos más elementos de los necesarios.</p>


<p>En los demás casos podemos usar un método alternativo, dejar al ordenador que cuente los elementos que hemos metido y nos reserve espacio para ellos:</p>

<DIV CLASS="ejemplo"><PRE>
#include &lt;stdio.h&gt;

int main()
     {
     int hora;
     /* Faltan los tres últimos elementos */
     int <B>temperaturas<U>[]</U></B> = { 15, 18, 20, 23, 22, 24, 22, 25, 26, 25, 24, 
                         22, 21, 20, 18, 17, 16, 17, 15, 14, 14 };

     for ( hora=0 ; hora&lt;24 ; hora++ )
         {
         printf( "La temperatura a las %i era de %i grados.\n", hora, temperaturas[hora] );
         }
     }
<FONT SIZE="-2" COLOR="#000000">Comprobado con DJGPP</FONT>
</PRE></DIV>


<p>Vemos que no hemos especificado la dimensión del array temperaturas. Hemos dejado los corchetes en blanco. El ordenador contará los elementos que hemos puesto entre llaves y reservará espacio para ellos. De esta forma siempre habrá el espacio necesario, ni más ni menos. La pega es que si ponemos más de los que queríamos no nos daremos cuenta.</p>


<p>Para saber en este caso cuantos elementos tiene la matriz podemos usar el operador sizeof. Dividimos el tamaño de la matriz entre el tamaño de sus elementos y tenemos el número de elementos.</p>


<DIV CLASS="ejemplo"><PRE>
#include &lt;stdio.h&gt;

int main()
     {
     int hora;
     int elementos;
     int temperaturas[] = { 15, 18, 20, 23, 22, 24, 22, 25, 26, 25,
                    24, 22, 21, 20, 18, 17, 16, 17, 15, 14, 14 };

     <B>elementos = sizeof temperaturas / sizeof(int);</B>
     for ( hora=0 ; hora&lt;elementos ; hora++ )
          {
          printf( "La temperatura a las %i era de %i grados.\n", hora, temperas[hora] );
          }
     printf( "Han sido %i elementos.\n" , elementos );
     }
<FONT SIZE="-2" COLOR="#000000">Comprobado con DJGPP</FONT>
</PRE></DIV>

<p class="volver"><a href="#arriba">[Arriba]</a></p>

<A NAME="recorrer"></A>
<H2>
	Recorrer un array
</H2>


<p>En el apartado anterior veíamos un ejemplo que mostraba todos los datos de un array. Veíamos también lo que pasaba si metíamos más o menos elementos al inicializar la matriz. Ahora vamos a ver qué pasa si intentamos imprimir más elementos de los que hay en la matriz, en este caso intentamos imprimir 28 elementos cuando sólo hay 24:</p>

<DIV CLASS="ejemplo"><PRE>
#include &lt;stdio.h&gt;

int main()
     {
     int hora;
     /* Faltan los tres últimos elementos */
     int temperaturas[24] = { 15, 18, 20, 23, 22, 24, 22, 25, 26, 25, 24, 
                            22, 21, 20, 18, 17, 16, 17, 15, 14, 14, 13, 13, 12 };

     for (hora=0 ; <B>hora&lt;28</B> ; hora++ )
         {
         printf( "La temperatura a las %i era de %i grados.\n", hora, temperaturas[hora] );
         }
     }
</PRE></DIV>
<FONT SIZE="-2">Comprobado con DJGPP</FONT>


<p>Lo que se obtiene en mi ordenador es:</p>

<DIV CLASS="ejemplo"><PRE>
La temperatura a las 22 era de 15 grados.
...
La temperatura a las 23 era de 12 grados.
<B>La temperatura a las 24 era de 24 grados.
La temperatura a las 25 era de 3424248 grados.
La temperatura a las 26 era de 7042 grados.
La temperatura a las 27 era de 1 grados.
</B></PRE></DIV>

<p>Vemos que a partir del elemento 24 (incluído) tenemos resultados extraños. Esto es porque nos hemos salido de los límites del array e intenta acceder al elemento temperaturas[25] y sucesivos que no existen. Así que nos muestra el contenido de la memoria que está justo detrás de temperaturas[23] (esto es lo más probable) que puede ser cualquiera. Al contrario que otros lenguajes <B><FONT COLOR="#0000ff" SIZE="+2" FACE="Comic Sans MS, Arial">C</FONT></B> no comprueba los límites de los array, nos deja saltárnoslos a la torera. Este programa no da error al compilar ni al ejecutar, tan sólo devuelve resultados extraños. Tampoco bloqueará el sistema porque no estamos escribiendo en la memoria sino leyendo de ella.</p>


<p>Otra cosa muy diferente es meter datos en elementos que no existen. Veamos un ejemplo <B>(ni se te ocurra ejecutarlo)</B>:</p>

<DIV CLASS="ejemplo"><PRE>#include &lt;stdio.h&gt;

int main()
     {
     int temp[24];
     float media = 0; 
     int hora;

     for( hora=0; <B>hora&lt;28</B>; hora++ )
          {
          printf( "Temperatura de las %i: ", hora );
          scanf( "%i", &temp[hora] );
          media += temp[hora];
          }
     media = media / 24;

     printf( "\nLa temperatura media es %f\n", media );
     }</PRE></DIV>



<p>Lo que sospechaba, lo he probado en mi ordenador y se ha bloqueado. He tenido que apagarlo. El problema ahora es que estamos intentando escribir en el elemento temp[24] que no existe y puede ser un lugar cualquiera de la memoria. Como consecuencia de esto podemos estar cambiando algún programa o dato de la memoria que no debemos y el sistema hace pluf. Así que mucho cuidado con esto.</p>


<p class="volver"><a href="#arriba">[Arriba]</a></p>

<A NAME="punteros"></A>
<H2>
	Punteros a arrays
</H2>

<p>Aquí tenemos otro de los importantes usos de los punteros, los punteros a arrays. Estos están íntimamente relacionados.</p>


<p>Para que un puntero apunte a un array se puede hacer de dos formas, una es apuntando al primer elemento del array:</p>


<DIV CLASS="ejemplo"><PRE>
	int *puntero;
	int temperaturas[24];

	puntero = &temperaturas[0];
</PRE></DIV>

<p>El puntero apunta a la dirección del primer elemento. Otra forma equivalente, pero mucho más usada es:</p>


<DIV CLASS="ejemplo"><PRE>
	puntero = temperaturas;
</PRE></DIV>

<p>Con esto también apuntamos al primer elemento del array. Fijaos que el puntero tiene que ser del mismo tipo que el array (en este caso int).</p>


<p>Ahora vamos a ver cómo acceder al resto de los elementos. Para ello empezamos por cómo funciona un array: Un array se guarda en posiciones seguidas en memoria, de tal forma que el segundo elemento va inmediatamente después del primero en la memoria. En un ordenador en el que el tamaño del tipo int es de 32 bits (4 bytes) cada elemento del array ocupará 4 bytes. Veamos un ejemplo:</p>

<DIV CLASS="ejemplo"><PRE>
#include &lt;stdio.h&gt;

int main()
     {
     int i;
     int temp[24];

     for( i=0; i&lt;24; i++ )
          {
          printf( "La dirección del elemento %i es %p.\n", i, &temp[i] );
          }
     }
</PRE></DIV>

<p>NOTA: Recuerda que %p sirve para imprimir en pantalla la dirección de una variable en hexadecimal.</p>

<p>El resultado es (en mi ordenador):</p>

<DIV CLASS="ejemplo"><PRE>
La dirección del elemento 0 es 4c430.
La dirección del elemento 1 es 4c434.
La dirección del elemento 2 es 4c438.
La dirección del elemento 3 es 4c43c.
...
La dirección del elemento 21 es 4c484.
La dirección del elemento 22 es 4c488.
La dirección del elemento 23 es 4c48c.
</PRE></DIV>

<p>(Las direcciones están en hexadecimal). Vemos aquí que efectivamente ocupan posiciones consecutivas y que cada una ocupa 4 bytes. Si lo representamos en una tabla:</p>



<CENTER><TABLE   border="4" cellspacing="1" cellpadding="5">
	<TR>
		<TD ALIGN=CENTER>	<FONT SIZE="-1">4C430</FONT></TD>
		<TD ALIGN=CENTER>	<FONT SIZE="-1">4C434</FONT></TD>
		<TD ALIGN=CENTER>	<FONT SIZE="-1">4C438</FONT></TD>
		<TD ALIGN=CENTER>	<FONT SIZE="-1">4C43C</FONT></TD>
	</TR>
	<TR>
		<TD ALIGN=CENTER>temp[0]</TD>
		<TD ALIGN=CENTER>temp[1]</TD>
		<TD ALIGN=CENTER>temp[2]</TD>
		<TD ALIGN=CENTER>temp[3]</TD>
	</TR>
</TABLE>
</CENTER>


<p>Ya hemos visto cómo funcionas los arrays por dentro, ahora vamos a verlo con punteros. Voy a poner un ejemplo:</p>


<DIV CLASS="ejemplo"><PRE>
#include &lt;stdio.h&gt;

int main()
     {
     int i;
     int temp[24];
     int *punt;

     <B>punt = temp;</B>

     for( i=0; i&lt;24; i++ )
          {
          printf( "La dirección de temp[%i] es %p y la de punt es %p.\n",
                  i, &temp[i], <B>punt</B> );
          <B>punt++;</B>
          }
     }
<FONT SIZE="-2" COLOR="#000000">Comprobado con DJGPP</FONT>
</PRE></DIV>

<p>Cuyo resultado es:</p>


<DIV CLASS="ejemplo"><PRE>
La dirección de temp[0] es 4c430 y la de punt es 4c430.
La dirección de temp[1] es 4c434 y la de punt es 4c434.
La dirección de temp[2] es 4c438 y la de punt es 4c438.
...
La dirección de temp[21] es 4c484 y la de punt es 4c484.
La dirección de temp[22] es 4c488 y la de punt es 4c488.
La dirección de temp[23] es 4c48c y la de punt es 4c48c.
</PRE></DIV>

<p>En este ejemplo hay dos líneas importantes (en negrita). La primera es <I>punt = temp</I>. Con esta hacemos que el punt apunte al primer elemento de la matriz. Si no hacemos esto punt apunta a un sitio cualquiera de la memoria y debemos recordar que no es conveniente dejar los punteros así, puede ser desastroso.</p>


<p>La segunda línea importante es <I>punt++</I>. Con esto incrementamos el valor de punt, pero curiosamente aunque incrementamos una unidad (punt++ equivale a punt=punt+1) el valor aumenta en 4. Aquí se muestra una de las características especiales de los punteros. Recordemos que en un puntero se guarda una dirección. También sabemos que un puntero apunta a un tipo de datos determinado (en este caso int). Cuando sumamos 1 a un puntero sumamos el tamaño del tipo al que apunta. En el ejemplo el puntero apunta a una variable de tipo int que es de 4 bytes, entonces al sumar 1 lo que hacemos es sumar 4 bytes. Con esto lo que se consigue es apuntar a la siguiente posición int de la memoria, en este caso es el siguiente elemento de la matriz.</p>



<CENTER><TABLE   border="1" cellspacing="0" cellpadding="4">
	<TR>
		<TD bgcolor="#0000ff"><FONT COLOR=#ffffff><B>Operación</B></FONT></TD>
		<TD bgcolor="#0000ff"><FONT COLOR=#ffffff><B>Equivalente</B></FONT></TD>
		<TD bgcolor="#800000"><FONT COLOR=#ffffff><B>Valor de punt</B></FONT></TD>
	</TR>
	<TR>
		<TD >punt = temp;</TD>
		<TD >punt = &temp[0];</TD>
		<TD ALIGN=CENTER>4c430</TD>
	</TR>
	<TR>
		<TD >punt++;</TD>
		<TD >sumar 4 al contenido de punt (4c430+4)</TD>
		<TD ALIGN=CENTER>4c434</TD>
	</TR>
	<TR>
		<TD >punt++;</TD>
		<TD >sumar 4 al contenido de punt (4c434+4)</TD>
		<TD ALIGN=CENTER>4c438</TD>
	</TR>
</TABLE>
</CENTER>


<p>Cuando hemos acabado estamos en temp[24] que no existe. Si queremos recuperar el elemento 1 podemos hacer <I>punt = temp</I> otra vez o restar 24 a punt:</p>


<DIV CLASS="ejemplo"><PRE>
	punt -= 24;
</PRE></DIV>

<p>con esto hemos restado 24 posiciones a punt (24 posiciones int*4 bytes por cada int= 96 posiciones).</p>


<p>Vamos a ver ahora un ejemplo de cómo recorrer la matriz entera con punteros y cómo imprimirla:</p>


<DIV CLASS="ejemplo"><PRE>
#include &lt;stdio.h&gt;

int main(int argc,char *argv[])
     {
     int temperaturas[24] = { 15, 18, 20, 23, 22, 24, 22, 25, 26, 25, 24,
                                 22, 21, 20, 18, 17, 16, 17, 15, 14, 14, 13, 12, 12 };

     int *punt;
     int i;

     punt = temperaturas;

     for( i=0 ; i&lt;24; i++ )
          {
          printf( "Elemento %i: %i\n", i, *punt );
          punt++;
          }
     }
<FONT SIZE="-2" COLOR="#000000">Comprobado con DJGPP</FONT>
</PRE></DIV>

<p>Cuando acabamos punt apunta a temperaturas[24], y no al primer elemento, si queremos volver a recorrer la matriz debemos volver como antes al comienzo. Para evitar perder la referencia al primer elemento de la matriz (temperaturas[0]) se puede usar otra forma de recorrer la matriz con punteros:</p>


<DIV CLASS="ejemplo"><PRE>
#include &lt;stdio.h&gt;

int main(int argc,char *argv[])
     {
     int temperaturas[24] = { 15, 18, 20, 23, 22, 24, 22, 25, 26, 25, 24, 
                                 22, 21, 20, 18, 17, 16, 17, 15, 14, 14, 13, 12, 12 };

     int *punt;
     int i;

     punt = temperaturas;

     for( i=0 ; i&lt;24; i++ )
          {
          printf( "Elemento %i: %i\n", i, <B><U>*(punt+i)</U></B> );
          }
     }
<FONT SIZE="-2" COLOR="#000000">Comprobado con DJGPP</FONT>
</PRE></DIV>

<p>Con <CODE>*(punt+i)</CODE> lo que hacemos es tomar la dirección a la que apunta <VAR>punt</VAR> (la dirección del primer elemento de la matriz) y le sumamos <VAR>i</VAR> posiciones. De esta forma tenemos la dirección del elemento <VAR>i</VAR>. No estamos sumando un valor a <VAR>punt</VAR>, para sumarle un valor habría que hacer <TT>punt++</TT> o <TT>punt+=algo</TT>, así que <VAR>punt</VAR> siempre apunta al principio de la matriz.</p>


<p>Se podría hacer este programa sin usar <VAR>punt</VAR>. Sustituyendolo por <VAR>temperaturas</VAR> y dejar <TT>*(temperaturas+i)</TT>.
Lo que no se puede hacer es: <TT>temperaturas++;</TT>.</p>


<p><B>Importante:</B> Como final debo comentar que el uso de índices es una forma de maquillar el uso de punteros. El ordenador convierte los índices a punteros. Cuando al ordenador le decimos temp[5] en realidad le estamos diciendo *(temp+5). Así que usar índices es equivalente a usar punteros de una forma más cómoda.</p>


<p class="volver"><a href="#arriba">[Arriba]</a></p>

<A NAME="funciones"></A>
<H2>
	Paso de un array a una función
</H2>


<p>En <B><FONT COLOR="#0000ff" SIZE="+2" FACE="Comic Sans MS, Arial">C</FONT></B> no podemos pasar un array entero a una función. Lo que tenemos que hacer es pasar un puntero al array. Con este puntero podemos recorrer el array:</p>

<DIV CLASS="ejemplo"><PRE>
#include &lt;stdio.h&gt;

int sumar( int *m )
     {
     int suma, i;

     suma = 0;
     for( i=0; i&lt;10; i++ )
          {
          suma += m[i];
          }
     return suma;
     }

int main()
     {
     int contador;
     int matriz[10] = { 10, 11, 13, 10, 14, 9, 10, 18, 10, 10 };

     for( contador=0; contador&lt;10; contador++ )
          printf( "   %3i\n", matriz[contador] );
     printf( "+ -----\n" );
     printf( "   %3i", sumar( matriz ) );
     }
<FONT SIZE="-2" COLOR="#000000">Comprobado con DJGPP</FONT>
</PRE></DIV>

<p>Este programa tiene alguna cosilla adicional como que muestra toda la matriz en una columna. Además se usa para imprimir los números <B>%3i</B>. El 3 indica que se tienen que alinear los números a la derecha, así queda más elegante.</p>


<p>Como he indicado no se pasa el array, sino un puntero a ese array. Si probamos el truquillo de más arriba de usar sizeof para calcular el número de elementos no funcionará aquí. Dentro de la función suma añadimos la línea:</p>

<DIV CLASS="ejemplo"><PRE>
    printf( "Tamaño del array: %i Kb, %i bits\n", sizeof m, (sizeof m)*8 );
</PRE></DIV>

<p>Devolverá 4 (depende del compilador) que serán los bytes que ocupa el int (m es un puntero a int). ¿Cómo sabemos entonces cual es el tamaño del array dentro de la función? En este caso lo hemos puesto nosotros mismos, 10. Pero creo que lo mejor es utilizar constantes como en el apartado <A HREF="#dimension">Sobre la dimensión de un array</A>.</p>


<p>He dicho que el array no se puede pasar a una función, que se debe usar un puntero. Pero vemos que luego estamos usando m[i], esto lo podemos hacer porque como se ha mencionado antes el uso de índices en una forma que nos ofrece <B><FONT COLOR="#0000ff" SIZE="+1" FACE="Comic Sans MS, Arial">C</FONT></B> de manejar punteros con matrices. Ya se ha visto que m[i] es equivalente a *(m+i).</p>



<p>Otras declaraciones equivalentes serían:</p>

<DIV CLASS="ejemplo"><PRE>
    int sumar( int m[] )
�
    int sumar( int m[10] )
</PRE></DIV>

<p>En realidad esta última no se suele usar, no es necesario indicar el número de elementos a la matriz.</p>


<p>int m[] e int *m son equivalentes.</p>


<p class="volver"><a href="#arriba">[Arriba]</a></p>

<A NAME="ejercicios"></A>
<H2>
	Ejercicios
</H2>

<p><B><U>Ejercicio 1:</U></B> </p>


<p><B>Solución</B>:</p>


<p class="volver"><a href="#arriba">[Arriba]</a></p>


<!-- InstanceEndEditable --> 
<p class="barranavegacionabajo"><!-- InstanceBeginEditable name="PieNavegacion" --> 
<a href="cursoc9.html" class="barranav">[Anterior]</a> <a href="cursoc11.html" class="barranav">[Siguiente]</a> 
<a href="index.html" target="_top" class="barranav">[Contenido]</a>
<!-- InstanceEndEditable --></p>

</BODY>

<!-- InstanceEnd --></HTML>