<HTML><!-- InstanceBegin template="/Templates/plantilla.dwt" codeOutsideHTMLIsLocked="false" -->
<HEAD>
<!-- InstanceBeginEditable name="doctitle" -->
<TITLE>Curso de C - Introducir datos por teclado</TITLE>
<!-- InstanceEndEditable --> 
<meta name="description" content="Curso de C - Introducción">
<meta name="keywords" content="Programación, Curso de C, C">
<META NAME="GENERATOR" CONTENT="Arachnophilia 3.5">
<META NAME="FORMATTER" CONTENT="Arachnophilia 3.5">
<meta name="author" content="Gorka Urrutia">
<meta name="DC.Creator" content="Gorka Urrutia">
<META name="robots" content="noindex, nofollow">
<style type="text/css">
<!--
    body {
        font-family: Verdana, Arial, sans-serif;
        font-size: 12px;
        background: white;
        color: #333;
        line-height: 1.6;
        margin: 20px;
        max-width: 800px;
        margin-left: auto;
        margin-right: auto;
    }
    
    h1 {
        font-family: Verdana, Arial, sans-serif;
        font-size: 24pt;
        font-weight: bold;
        color: #006600;
        text-align: center;
        margin-bottom: 20px;
    }
    
    h2 {
        font-family: Verdana, Arial, sans-serif;
        font-size: 18pt;
        font-weight: bold;
        color: #006600;
        border-bottom: 2px solid #e0e0e0;
        padding-bottom: 10px;
        margin-top: 30px;
    }
    
    a:link, a:visited {
        font-family: Verdana, Arial, sans-serif;
        font-weight: bold;
        color: #006600;
        text-decoration: none;
    }
    
    a:hover {
        color: #009900;
        text-decoration: underline;
    }
    
    .barranavegaciontop, .barranavegacionabajo {
        background-color: #f9f9f9;
        border: 1px solid #e0e0e0;
        border-radius: 5px;
        padding: 10px;
        margin: 20px 0;
        text-align: center;
    }
    
    .barranav {
        font-family: Verdana, Arial, sans-serif;
        font-weight: bold;
        color: #006600;
        text-decoration: none;
        margin: 0 10px;
    }
    
    .barranav:hover {
        color: #009900;
        text-decoration: underline;
    }
    
    .volver {
        text-align: right;
        margin: 20px 0;
    }
    
    ul {
        background-color: #f9f9f9;
        border: 1px solid #e0e0e0;
        border-radius: 5px;
        padding: 20px 40px;
        margin: 20px 0;
    }
    
    li {
        margin: 10px 0;
    }
    
    .ejemplo {
        background-color: #f0f0f0;
        border-left: 4px solid #006600;
        padding: 15px;
        margin: 15px 0;
        font-family: "Courier New", monospace;
        font-size: 12px;
        overflow-x: auto;
    }
    
    .nota {
        background-color: #fff8e1;
        border-left: 4px solid #ff9800;
        padding: 15px;
        margin: 15px 0;
    }
    
    .resultado {
        background-color: #e8f5e8;
        border-left: 4px solid #4caf50;
        padding: 15px;
        margin: 15px 0;
        font-family: "Courier New", monospace;
        font-size: 12px;
    }
    
    table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
    }
    
    img {
        border: 0;
    }
    
    pre {
        margin: 0;
        white-space: pre-wrap;
    }
    
    code {
        color: #006600;
    }
    
    var {
        font-style: italic;
        color: #006600;
    }
    
    .letraC {
        font-weight: bold;
        color: #006600;
    }
    
    .texto {
        background-color: #f9f9f9;
        border: 1px solid #e0e0e0;
        border-radius: 5px;
        padding: 20px;
        margin: 20px 0;
    }
    
    .ejemplo pre {
        margin: 0;
        background: none;
        border: none;
        padding: 0;
    }
    
    b, strong {
        color: #006600;
    }
    
    u {
        color: #006600;
    }
    
    ol.texto {
        background-color: #f9f9f9;
        border: 1px solid #e0e0e0;
        border-radius: 5px;
        padding: 20px 40px;
        margin: 20px 0;
    }
    
    ol.texto li {
        margin: 10px 0;
    }
    
    table[border="1"] {
        width: 100%;
        border: 1px solid #e0e0e0;
        border-collapse: collapse;
        margin: 20px 0;
    }
    
    table[border="1"] td {
        border: 1px solid #e0e0e0;
        padding: 10px;
        text-align: center;
    }
    
    table[border="1"] th {
        border: 1px solid #e0e0e0;
        padding: 10px;
        background-color: #f9f9f9;
        font-weight: bold;
    }
-->
</style>
<!-- InstanceBeginEditable name="head" --><!-- InstanceEndEditable -->
</HEAD>
<BODY>
<a name="arriba"></a> 

<table width="100%" border="0">
<tr>
<td align="left"><img src="https://sic.cultura.gob.mx/imagenes_cache/universidad_4269_g_74422.png" alt="Curso de C" border="0" style="width: 300px; height: auto; max-width: 300px;">
</td>
<td align="right"><a href="http://www.elrincondelc.com" target="_top"><img src="logogrande.gif" alt="El Rincón del C - www.elrincondelc.com"  border="0"></a> 
</td>
</tr>
</table>
<!-- InstanceBeginEditable name="Titulo" -->
<h1>Introducir datos por teclado</h1>
<!-- InstanceEndEditable --> 

<p class="barranavegaciontop"><!-- InstanceBeginEditable name="BarraNavegacion" --> 
<a href="cursoc5.html" class="barranav">[Anterior]</a> <a href="cursoc7.html" class="barranav">[Siguiente]</a> 
<a href="index.html" target="_top" class="barranav">[Contenido]</a>
<!-- InstanceEndEditable --></p>

<!-- InstanceBeginEditable name="Cuerpo" -->
<a name="arriba"></a>

<A NAME="contenido"></A>
<H2>
	Contenido del capítulo
</H2>

<UL>
	<LI><A HREF="#intro">Introducción</A><BR>
	<LI><A HREF="#scanf">Scanf</A><BR>
	<LI><A HREF="#getch">Getch y getche</A><BR>
	<LI><A HREF="#ejercicios">Ejercicios</A><BR>
</UL>


<A NAME="intro"></A>
<H2>
	Introducción
</H2>

<p>Algo muy usual en un programa es esperar que el usuario introduzca datos por el teclado. Para ello contamos con varias posibilidades: Usar las funciones de la biblioteca estándar, crear nuestras propias interrupciones de teclado (MS-Dos) o usar funciones de alguna biblioteca diferente (como por ejemplo Allegro).</p>

<p>Nosotros en este capítulo vamos a estudiar la primera, usando las funciones de la biblioteca estándar. Pero veamos por encima las otras posibilidades.</p>

<p>Las funciones estándar están bien para un programa sencillito. Pero cuando queremos hacer juegos por ejemplo, no suelen ser suficiente. Demasiado lentas o no nos dan todas las posibilidades que buscamos, como comprobar si hay varias teclas pulsadas. Para solucionar esto tenemos dos posibilidades:</p>

<p>La más coplicada es crear nuestras propias interrupciones de teclado. ¿Qué es una interrupción de teclado? Es un pequeño programa en memoria que se ejecuta contínuamente y comprueba el estado del teclado. Podemos crear uno nuestro y hacer que el ordenador use el que hemos creado en vez del suyo. Este tema no lo vamos a tratar ahora, quizás en algún capítulo posteror.</p>

<p>Otra posibilidad más sencilla es usar una biblioteca que tenga funciones para controlar el teclado. Por ejemplo si usamos la biblioteca Allegro, ella misma hace todo el trabajo y nosotros no tenemos más que recoger sus frutos con un par de sencillas instrucciones. Esto soluciona mucho el trabajo y nos libra de tener que aprender cómo funcionan los aspectos más oscuros del control del teclado.</p>

<p>Vamos ahora con las funciones de la biblioteca estándar.</p>

<p class="volver"><a href="#arriba">[Arriba]</a></p>

<A NAME="scanf"></A>
<H2>
	Scanf
</H2>

<p>El uso de scanf es muy similar al de printf con una diferencia, nos da la posibilidad de que el usuario introduzca datos en vez de mostrarlos. No nos permite mostrar texto en la pantalla, por eso si queremos mostrar un mensaje usamos un printf delante. Un ejemplo:</p>

<DIV CLASS="ejemplo"><PRE>
#include &lt;stdio.h&gt;
	
int main()
	{
	int num;
	printf( "Introduce un número " );
	scanf( "%i", &num );
	printf( "Has tecleado el número %i\n", num );
	return 0;
	}
</PRE></DIV>

<p>Primero vamos a ver unas nota de estética, para hacer los programas un poco más elegantes. Parece una tontería, pero los pequeños detalles hacen que un programa gane mucho. El scanf no mueve el cursor de su posición actual, así que en nuestro ejemplo queda:</p>

<DIV CLASS="ejemplo"><PRE>
	Introduce un número <BLINK>_</BLINK> 	/* La barra horizontal indica dónde esta el cursor */
</PRE></DIV>

<p>Esto es porque en el printf no hemos puesto al final el símbolo de salto de línea '\n'. Además hemos dejado un espacio al final de <I>Introduce un número:</I> para que así cuando tecleemos el número no salga pegado al mensaje. Si no hubiésemos dejado el espacio quedaría así al introducir el número 120 (es un ejemplo):</p>

<DIV CLASS="ejemplo"><PRE>
	Introduce un número120
</PRE></DIV>

<p>Bueno, esto es muy interesante pero vamos a dejarlo y vamos al grano. Veamos cómo funciona el scanf. Lo primero nos fijamos que hay una cadena entre comillas. Esta es similar a la de printf, nos sirve para indicarle al compilador qué tipo de datos estamos pidiendo. Como en este caso es un integer usamos %i. Después de la coma tenemos la variable donde almacenamos el dato, en este caso 'num'.</p>

<p>Fíjate que en el scanf la variable 'num' lleva delante el símbolo <B>&</B>, este es muy importante, sirve para indicar al compilador cual es la dirección (o posición en la memoria) de la variable. Por ahora no te preocupes por eso, ya volveremos más adelante sobre el tema.</p>

<p>Podemos preguntar por más de una variable a la vez en un sólo scanf, hay que poner un %i por cada variable:</p>

<DIV CLASS="ejemplo"><PRE>
#include &lt;stdio.h&gt;

int main()
	{
	int a, b, c;

	printf( "Introduce tres números: " );
	scanf( "%i %i %i", &a, &b, &c );
	printf( "Has tecleado los números %i %i %i\n", a, b, c );
	return 0;
	}
</PRE></DIV>

<p>De esta forma cuando el usuario ejecuta el programa debe introducir los tres datos separados por un espacio.
</p>

<p>También podemos pedir en un mismo scanf variables de distinto tipo:
</p>

<DIV CLASS="ejemplo"><PRE>
#include &lt;stdio.h&gt;
	
int main()
	{
	int a;
	float b;

	printf( "Introduce dos números: " );
	scanf( "%i %f", &a, &b );

	printf( "Has tecleado los números %i %f\n", a, b );
	return 0;
	}
</PRE></DIV>

<p>A cada modificador (%i, %f) le debe corresponder una variable de su mismo tipo. Es decir, al poner un %i el compilador espera que su variable correspondiente sea de tipo int. Si ponemos %f espera una variable tipo float.
</p>
<p class="volver"><a href="#arriba">[Arriba]</a></p>

<A NAME="getch"></A>
<H2>
	Getch y getche
</H2>

<p>Si lo que queremos es que el usuario introduzca un caracter por el teclado usamos las funciones getch y getche. Estas esperan a que el usuario introduzca un carácter por el teclado. La diferencia entre getche y getch es que la primera saca por pantalla la tecla que hemos pulsado y la segunda no (la e del final se refiere a <I>echo</I>=eco). Ejemplos:</p>

<DIV CLASS="ejemplo"><PRE>
#include &lt;stdio.h&gt;

int main()
	{
	char letra;

	printf( "Introduce una letra: " );
	fflush( stdout );
	letra = getche();
	printf( "\nHas introducido la letra: %c", letra );
	return 0;
	}
</PRE></DIV>

Resultado:

<DIV CLASS="ejemplo"><PRE>
Introduce una letra: <B>a</B>
Has introducido la letra: a
</PRE></DIV>

<p>Quizás te estás preguntando qué es eso de fflush( stdout ). Pues bien, cuando usamos la función printf, no escribimos directamente en la pantalla, sino en una memoria intermedia (lo que llaman un bufer). Cuando este bufer se llena o cuando metemos un carácter '\n' es cuando se envía el texto a la pantalla. En este ejemplo yo quería que apareciera el mensaje <I>Introduce una letra:</I> y el cursor se quedara justo después, es decir, sin usar '\n'. Si se hace esto, en algunos compiladores el mensaje no se muestra en pantalla hasta que se pulsa una tecla (pruébalo en el tuyo). Y la función fflush( stdout ) lo que hace es enviar a la pantalla lo que hay en ese bufer.</p>

<p>Y ahora un ejemplo con getch:</p>

<DIV CLASS="ejemplo"><PRE>
#include &lt;stdio.h&gt;

int main()
	{
	char letra;

	printf( "Introduce una letra: " );
	fflush( stdout );
	letra = getch();
	printf("\n has introducido la letra :%c", letra );
	return 0;
	}
</PRE></DIV>

<p>Resultado:</p>

<DIV CLASS="ejemplo"><PRE>
Introduce una letra:
Has introducido la letra: a
</PRE></DIV>

<p>Como vemos la única diferencia es que en el primer ejemplo se muestra en pantalla lo que escribimos y en el segundo no.
</p>

<p class="volver"><a href="#arriba">[Arriba]</a></p>

<A NAME="ejercicios"></A>
<H2>
	Ejercicios
</H2>



<p><strong>Ejercicio 1: </strong>Busca el error en el siguiente programa:</p>
<DIV CLASS="ejemplo"><PRE>
#include &lt;stdio.h&gt;

int main() {
    int numero;
    
    printf( "Introduce un número: " );
    scanf( "%d", numero );
    printf( "\nHas introducido el número %d.\n", numero );
    return 0;
}
</PRE></DIV>


<p><strong>Solución:</strong></p>
<p>A la variable número le falta el '&amp;' con lo que no estamos indicando 
  al programa la dirección de la variable y no obtendremos el resultado 
  deseado. Haz la prueba y verás que el mensaje "Has introducido el 
  número X" no muestra el número que habías introducido.</p>



<p align=center><a href="#arriba" class="volver">[Arriba]</a></p>


<!-- InstanceEndEditable --> 
<p class="barranavegacionabajo"><!-- InstanceBeginEditable name="PieNavegacion" --> 
<a href="cursoc5.html" class="barranav">[Anterior]</a> <a href="cursoc7.html" class="barranav">[Siguiente]</a> 
<a href="index.html" target="_top" class="barranav">[Contenido]</a>
<!-- InstanceEndEditable --></p>

</BODY>

<!-- InstanceEnd --></HTML>