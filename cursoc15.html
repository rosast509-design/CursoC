<HTML>
<HEAD>
<!-- InstanceBeginEditable name="doctitle" -->
<TITLE>Curso de C - Uniones y Enumeraciones</TITLE>
<!-- InstanceEndEditable --> 
<meta name="description" content="Curso de C - Uniones y Enumeraciones">
<meta name="keywords" content="Programación, Curso de C, C, uniones, enumeraciones, union, enum">
<META NAME="GENERATOR" CONTENT="Arachnophilia 3.5">
<META NAME="FORMATTER" CONTENT="Arachnophilia 3.5">
<meta name="author" content="Gorka Urrutia">
<meta name="DC.Creator" content="Gorka Urrutia">
<META name="robots" content="noindex, nofollow">
<style type="text/css">
<!--
    body {
        font-family: Verdana, Arial, sans-serif;
        font-size: 12px;
        background: white;
        color: #333;
        line-height: 1.6;
        margin: 20px;
        max-width: 800px;
        margin-left: auto;
        margin-right: auto;
    }
    
    h1 {
        font-family: Verdana, Arial, sans-serif;
        font-size: 24pt;
        font-weight: bold;
        color: #006600;
        text-align: center;
        margin-bottom: 20px;
    }
    
    h2 {
        font-family: Verdana, Arial, sans-serif;
        font-size: 18pt;
        font-weight: bold;
        color: #006600;
        border-bottom: 2px solid #e0e0e0;
        padding-bottom: 10px;
        margin-top: 30px;
    }
    
    h3 {
        font-family: Verdana, Arial, sans-serif;
        font-size: 14pt;
        font-weight: bold;
        color: #006600;
        margin-top: 20px;
        margin-bottom: 10px;
    }
    
    a:link, a:visited {
        font-family: Verdana, Arial, sans-serif;
        font-weight: bold;
        color: #006600;
        text-decoration: none;
    }
    
    a:hover {
        color: #009900;
        text-decoration: underline;
    }
    
    .barranavegaciontop, .barranavegacionabajo {
        background-color: #f9f9f9;
        border: 1px solid #e0e0e0;
        border-radius: 5px;
        padding: 10px;
        margin: 20px 0;
        text-align: center;
    }
    
    .barranav {
        font-family: Verdana, Arial, sans-serif;
        font-weight: bold;
        color: #006600;
        text-decoration: none;
        margin: 0 10px;
    }
    
    .barranav:hover {
        color: #009900;
        text-decoration: underline;
    }
    
    .volver {
        text-align: right;
        margin: 20px 0;
    }
    
    ul {
        background-color: #f9f9f9;
        border: 1px solid #e0e0e0;
        border-radius: 5px;
        padding: 20px 40px;
        margin: 20px 0;
    }
    
    li {
        margin: 10px 0;
    }
    
    .ejemplo {
        background-color: #f0f0f0;
        border-left: 4px solid #006600;
        padding: 15px;
        margin: 15px 0;
        font-family: "Courier New", monospace;
        font-size: 12px;
        overflow-x: auto;
    }
    
    .nota {
        background-color: #fff8e1;
        border-left: 4px solid #ff9800;
        padding: 15px;
        margin: 15px 0;
    }
    
    .resultado {
        background-color: #e8f5e8;
        border-left: 4px solid #4caf50;
        padding: 15px;
        margin: 15px 0;
        font-family: "Courier New", monospace;
        font-size: 12px;
    }
    
    table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
    }
    
    img {
        border: 0;
        display: block;
        margin: 10px auto;
    }
    
    pre {
        margin: 0;
        white-space: pre-wrap;
    }
    
    code {
        color: #006600;
    }
    
    var {
        font-style: italic;
        color: #006600;
    }
    
    .letraC {
        font-weight: bold;
        color: #006600;
    }
    
    .texto {
        background-color: #f9f9f9;
        border: 1px solid #e0e0e0;
        border-radius: 5px;
        padding: 20px;
        margin: 20px 0;
    }
    
    .ejemplo pre {
        margin: 0;
        background: none;
        border: none;
        padding: 0;
    }
    
    b, strong {
        color: #006600;
    }
    
    u {
        color: #006600;
    }
    
    ol.texto {
        background-color: #f9f9f9;
        border: 1px solid #e0e0e0;
        border-radius: 5px;
        padding: 20px 40px;
        margin: 20px 0;
    }
    
    ol.texto li {
        margin: 10px 0;
    }
    
    table[border="1"] {
        width: 100%;
        border: 1px solid #e0e0e0;
        border-collapse: collapse;
        margin: 20px 0;
    }
    
    table[border="1"] td {
        border: 1px solid #e0e0e0;
        padding: 10px;
        text-align: center;
    }
    
    table[border="1"] th {
        border: 1px solid #e0e0e0;
        padding: 10px;
        background-color: #f9f9f9;
        font-weight: bold;
    }
    
    center {
        text-align: center;
    }
    
    font[color="#ff0000"] {
        color: #ff0000;
    }
    
    font[color="#0000ff"] {
        color: #0000ff;
    }
    
    blockquote.texto {
        background-color: #f9f9f9;
        border: 1px solid #e0e0e0;
        border-radius: 5px;
        padding: 20px;
        margin: 20px 0;
        font-style: italic;
    }
    
    em {
        font-style: italic;
    }
    
    .comprobado {
        font-size: 10px;
        color: #666;
        display: block;
        margin-top: 5px;
    }
    
    pre code {
        color: #006600;
    }
    
    .coment {
        color: #666;
        font-style: italic;
    }
    
    .enlace {
        text-decoration: none;
        color: #006600;
    }
    
    .enlace:hover {
        text-decoration: underline;
    }
    
    .mini {
        font-size: 10px;
        color: #666;
    }
-->
</style>
<!-- InstanceBeginEditable name="head" --><!-- InstanceEndEditable -->
</HEAD>
<BODY>
<a name="arriba"></a> 

<table width="100%" border="0">
<tr>
<td align="left"><img src="https://sic.cultura.gob.mx/imagenes_cache/universidad_4269_g_74422.png" alt="Curso de C" border="0" style="width: 300px; height: auto; max-width: 300px;">
</td>
<td align="right"><a href="http://www.elrincondelc.com" target="_top"><img src="logogrande.gif" alt="El Rincón del C - www.elrincondelc.com"  border="0"></a> 
</td>
</tr>
</table>
<!-- InstanceBeginEditable name="Titulo" -->
<h1>Uniones y Enumeraciones</h1>
<!-- InstanceEndEditable --> 

<p class="barranavegaciontop"><!-- InstanceBeginEditable name="BarraNavegacion" --> 
<a href="cursoc14.html" class="barranav">[Anterior]</a> <a href="cursoc16.html" class="barranav">[Siguiente]</a> 
<a href="index.html" target="_top" class="barranav">[Contenido]</a>
<!-- InstanceEndEditable --></p>

<!-- InstanceBeginEditable name="Cuerpo" -->
<a name="arriba"></a>

<A NAME="contenido"></A>
<H2>
	Contenido
</H2>

<UL>
	<LI><A HREF="#uniones" class="enlace">Uniones</A>
	<LI><A HREF="#enumeraciones" class="enlace">Enumeraciones</A>
	<LI><A HREF="#ejercicios" class="enlace">Ejercicios</A>
</UL>

<A NAME="uniones"></A>
<H2>
	Uniones
</H2>

<p>Hemos visto que las estructuras toman una parte de la memoria y se la reparten entre sus miembros. Cada miembro tiene reservado un espacio para él solo. El tamaño total que ocupa una estructura en memoria es la suma del tamaño que ocupa cada uno de sus miembros.</p>

<p>Las uniones tienen un aspecto similar en cuanto a cómo se definen, pero tienen una diferencia fundamental con respecto a las estructuras: los miembros comparten el mismo trozo de memoria. El espacio que ocupa en memoria una unión es el espacio que ocupa el campo más grande. Para entenderlo mejor vamos a ver un ejemplo:</p>

<p>Primero vamos a ver cómo se define una unión:</p>

<DIV CLASS="ejemplo"><PRE>
<B>union</B> <em>nombre_de_unión</em>
      <B>{</B>
      <em>campos de la unión</em>
      <B>};</B>
</PRE></DIV>

<p class="mini">NOTA: No se debe olvidar el ';' después de cerrar llaves '}'.</p>

<p>Y aquí va el ejemplo:</p>

<DIV CLASS="ejemplo"><PRE>
union _persona
      {
      char nombre[10];
      char inicial;
      };
</PRE></DIV>

<p>Creamos una unión y sus elementos son un <em>nombre</em> de 10 bytes (nombre[10]) y la inicial (1 byte). Como hemos dicho la unión ocupa el espacio de su elemento más grande, en este caso <em>nombre</em>. Por lo tanto la unión ocupa 10 bytes. Las variables nombre e inicial comparten el mismo sitio de la memoria. Si accedemos a <em>nombre</em> estaremos accediendo a los primeros 10 bytes de la unión (es decir, a toda la unión), si accedemos a <em>inicial</em> lo que tendremos es el primer byte de la unión.</p>

<center>
<img src="union1.jpg" width="232" height="83" alt=""></center>

<DIV CLASS="ejemplo"><PRE>
#include &lt;stdio.h&gt;

union _persona
      {
      char nombre[10];
      char inicial;
      } pers;

int main()
     {
     printf("Escribe tu nombre: ");
     gets(pers.nombre);
     printf("\nTu nombre es: %s\n", pers.nombre);
     printf("Tu inicial es: %c\n", pers.inicial);
     }
</PRE>
<DIV CLASS="comprobado">Comprobado con DJGPP</DIV></DIV>

<p>Ejecutando el programa:</p>

<DIV CLASS="ejemplo"><PRE>
Escribe tu nombre: <B>Gorka</B>

Tu nombre es: Gorka
Tu inicial es: G
</PRE></DIV>

<p>Para comprender mejor eso de que comparten el mismo espacio en memoria vamos a ampliar el ejemplo. Si añadimos unas líneas al final que modifiquen sólo la inicial e imprima el nuevo nombre:</p>

<DIV CLASS="ejemplo"><PRE>
#include &lt;stdio.h&gt;

union _persona
      {
      char nombre[10];
      char inicial;
      } pers;

int main()
     {
     printf("Escribe tu nombre: ");
     gets(pers.nombre);
     printf("\nTu nombre es: %s\n", pers.nombre);
     printf("Tu inicial es: %c\n", pers.inicial);
     <font color="#0000ff">/* Cambiamos la inicial */</font>
     pers.inicial='Z';
     printf("\nAhora tu nombre es: %s\n", pers.nombre);
     printf("y tu inicial es: %c\n", pers.inicial);
     }
</PRE><DIV CLASS="comprobado">Comprobado con DJGPP</DIV></DIV>

<p>Tendremos el siguiente resultado:</p>

<DIV CLASS="ejemplo"><PRE>
Escribe tu nombre: gorka

Tu nombre es: gorka
Tu inicial es: g

Ahora tu nombre es: Zorka
y tu inicial es: Z
</PRE></DIV>

<p>Aquí queda claro que al cambiar el valor de la inicial estamos cambiando también el nombre porque la inicial y la primera letra del nombre son la misma posición de la memoria.</p>

<p>Con las uniones podemos usar punteros de manera similar a lo que vimos en el capítulo de las estructuras.</p>

<p class="volver"><a href="#arriba">[Arriba]</a></p>

<A NAME="enumeraciones"></A>
<H2>
	Enumeraciones
</H2>

<p>En el capítulo de la constantes (<A HREF="cursoc4.html">cap. 4</A>) vimos que se podía dar nombre a las constantes con <em>#define</em>. Utilizando esta técnica podríamos hacer un programa en que definiríamos las constantes <em>primero...quinto</em>.</p>

<DIV CLASS="ejemplo"><PRE>
#include &lt;stdio.h&gt;

#define primero 1
#define segundo 2
#define tercero 3
#define cuarto  4
#define quinto  5

int main()
    {
    int posicion;
    posicion=segundo;
    printf("posicion = %i\n", posicion);
    }
</PRE><DIV CLASS="comprobado">Comprobado con DJGPP</DIV></DIV>

<p>Sin embargo existe otra forma de declarar estas constantes y es con las enumeraciones. Las enumeraciones se crean con enum:</p>

<DIV CLASS="ejemplo"><PRE>
<B>enum</B> <em>nombre_de_enumeración</em>
	<B>{</B>
	<em>nombres de las constantes</em>
	<B>};</B>
</PRE></DIV>

<p>Por ejemplo:</p>

<DIV CLASS="ejemplo"><PRE>
enum { primero, segundo, tercero, cuarto, quinto };
</PRE></DIV>

<p>De esta forma hemos definido las constantes <em>primero, segundo,... quinto</em>. Si no especificamos nada la primera constante (primero) toma el valor 0, la segunda (segunda) vale 1, la tercera 2,... Podemos cambiar estos valores predeterminados por los valores que deseemos:</p>

<DIV CLASS="ejemplo"><PRE>
enum { primero=1, segundo, tercero, cuarto, quinto };
</PRE></DIV>

<p>Ahora primero vale 1, segundo vale 2, tercero vale 3,... Cada constante toma el valor de la anterior más uno. Si por ejemplo hacemos:</p>

<DIV CLASS="ejemplo"><PRE>
enum { primero=1, segundo, quinto=5, sexto, septimo };
</PRE></DIV>

<p>Tendremos: primero=1, segundo=2, quinto=5, sexto=6, septimo=7.</p>

<p>Con esta nueva técnica podemos volver a escribir el ejemplo de antes:</p>

<DIV CLASS="ejemplo"><PRE>
#include &lt;stdio.h&gt;

enum { primero=1, segundo, tercero, cuarto, quinto } posicion;

int main()
    {
    posicion=segundo;
    printf("posicion = %i\n", posicion);
    }
</PRE><DIV CLASS="comprobado">Comprobado con DJGPP</DIV></DIV>

<p>Las constantes definidas con enum <B>sólo</B> pueden tomar valores enteros (pueden ser negativos). Son equivalentes a las variables de tipo <em>int</em>.</p>

<p>Un error habitual suele ser pensar que es posible imprimir el nombre de la constante:</p>

<DIV CLASS="ejemplo"><PRE>
#include &lt;stdio.h&gt;

enum { primero=1, segundo, tercero, cuarto, quinto } posicion;

int main()
    {
    printf("posicion = %s\n", segundo);
    }
</PRE><DIV CLASS="comprobado">Este ejemplo contiene errores</DIV></DIV>

<p>Es habitual pensar que con este ejemplo tendremos como resultado: <em>posicion = segundo</em>. Pero no es así, en todo caso tendremos: <em>posicion = (null)</em></p>

<p>Debemos pensar en las enumeraciones como una forma de hacer el programa más comprensible para los humanos, en nuestro ejemplo el ordenador donde vea <em>segundo</em> pondrá un 2 en su lugar.</p>

<p class="volver"><a href="#arriba">[Arriba]</a></p>

<A NAME="ejercicios"></A>
<H2>
	Ejercicios
</H2>

<P><B><U>Ejercicio:</U></B>
</P>

<P><B>Solución:</B>
</P>

<p class="volver"><a href="#arriba">[Arriba]</a></p>

<!-- InstanceEndEditable --> 
<p class="barranavegacionabajo"><!-- InstanceBeginEditable name="PieNavegacion" --> 
<a href="cursoc14.html" class="barranav">[Anterior]</a> <a href="cursoc16.html" class="barranav">[Siguiente]</a> 
<a href="index.html" target="_top" class="barranav">[Contenido]</a>
<!-- InstanceEndEditable --></p>
</BODY>
</HTML>